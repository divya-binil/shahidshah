{{ $data := index .Site.Data .Site.Language.Lang }}
{{ with $data.youtubevideos }}
<script src="/js/jquery-1.11.0.min.js"></script>

<div class="video-slider">
    <!-- SLIDE 1 -->
    {{ range .item }} 
    {{ "<!-- testimonial single -->" | safeHTML }} 
    <div class="slide">  
        <a href="{{ .link }}"  target="_blank"><img class="video-image" src="{{ .image }}"> </a> 
        <div class="text-block">
            <h6>{{ .caption }}</h6>
        </div>                      
    </div>
    {{ end }}  
   
    <!-- END OF SLIDES -->
    <div class="slide-arrow left"></div>
    <div class="slide-arrow right"></div>
</div>
 {{ end }}  
<script>
/*$(document).ready(function() {
    setInterval("nextSlide()", 5000);
 }); */


 /*$(document).ready(function(){
    //auto start after 3 seconds
    setTimeout(function(){
         $('.right').click();
    },3000);

    //slideshow - every 3 seconds
    var slider = setInterval(function(){
        $('.right').click();
    },3000);

});*/

$('.play-button').on('click', function () {
        $(this).hide();
        $(this).parent().fadeOut();
        $(this).parent().siblings('.slider-video')[0].play();
    });

    $('.slider-video').on('play', function () {
        $(this).attr('controls', '1');
    });

    // Additionnal code for the slider
    var pos = 0,
        slides = $('.slide'),
        numOfSlides = slides.length;

    function nextSlide(){
        stopCurrentVideo();
        slides.eq(pos).animate({left:'-100%'},500);
        pos = pos >= numOfSlides-1 ? 0 : ++pos;
        slides.eq(pos).css({left:'100%'}).animate({left:0},500);
    }

    function previousSlide(){
        stopCurrentVideo();
        slides.eq(pos).animate({left:'100%'},500);
        pos = pos == 0 ? numOfSlides-1 : --pos;
        slides.eq(pos).css({left:'-100%'}).animate({left:0},500);
    }

    function stopCurrentVideo(){
        $('.slider-video:eq('+pos+')').load().removeAttr('controls')
        .siblings('.overlay-content').show().find('.play-button').show();
    }

    $('.left').click(previousSlide);
    $('.right').click(nextSlide);
    </script>